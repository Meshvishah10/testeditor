<div class="modal fade" id="AddUser" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" *ngIf="EditUserId == ''">Add User</h5>
        <h5 class="modal-title" *ngIf="EditUserId != ''">Edit User</h5>
        <button
          type="button"
          class="btn-close"
          (click)="CloseModel()"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body formdiv">
        <form [formGroup]="AddEditForm" appFocus appFocusFirstInput>
          <div class="row gx-3">
            <div class="col-lg-12 col-md-12">
              <div class="row">
                <!-- Profile Picture Section -->
                <div class="col-lg-3 col-md-12">
                  <!-- Profile Picture and Update Section -->
                  <div class="col-lg-12 col-md-6 profile-pic text-center">
                    <!-- Display user's profile image if available -->
                    <img
                      [src]="profileImage"
                      alt="profileImage"
                      *ngIf="profileImage != ''"
                    />
                    <!-- Display default profile image if user's profile image is not available -->
                    <img
                      src="../../../../assets/images/default-profile.png"
                      alt="profileImage"
                      *ngIf="profileImage == ''"
                    />
                    <!-- Profile Update Section with file input -->
                    <div class="profile-update text-center col-lg-12 col-md-6">
                      <span class="profile-input" data-name="filepond">
                        <input
                          type="file"
                          name="filepond"
                          size="20"
                          class="wpcf7-form-control wpcf7-file"
                          id="profileUpdate"
                          accept=".jpg,.jpeg,.png"
                          aria-invalid="false"
                          (change)="ChangeProfile($event)"
                        />
                      </span>
                      <label
                        for="profileUpdate"
                        class="btn btn-primary"
                        *ngIf="EditUserId == ''"
                        >Select User Logo</label
                      >
                      <label
                        for="profileUpdate"
                        class="btn btn-primary"
                        *ngIf="EditUserId != ''"
                        >Upload User Logo</label
                      >
                    </div>
                  </div>
                </div>

                <div class="col-lg-9 col-md-12 mt-4">
                  <div class="row">
                    <div class="col-lg-4 col-md-12">
                      <div class="mb-3">
                        <label class="form-label"
                          >First Name:<span class="errortext ms-1"
                            >*</span
                          ></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          placeholder="Enter First Name"
                          formControlName="FirstName"
                          [ngClass]="{
                            'is-invalid': isSubmitted && f.FirstName.errors
                          }"
                          TrimWhitespace
                          maxlength="50"
                        />
                        <!-- Error message for required validation -->
                        <div
                          *ngIf="isSubmitted && f.FirstName.errors"
                          class="invalid-feedback"
                        >
                          <div *ngIf="f.FirstName.errors.required">
                            Please enter First Name
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-12">
                      <div class="mb-3">
                        <label class="form-label">Last Name:</label>
                        <input
                          type="text"
                          class="form-control"
                          placeholder="Enter Last Name"
                          formControlName="LastName"
                          TrimWhitespace
                          maxlength="50"
                        />
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-12">
                      <div class="mb-3">
                        <label class="form-label"
                          >Email:<span class="errortext ms-1">*</span></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          placeholder="Enter Email"
                          formControlName="Email1"
                          [ngClass]="{
                            'is-invalid': isSubmitted && f.Email1.errors
                          }"
                          TrimWhitespace
                          appInputMaskEmail
                          maxlength="100"
                        />
                        <!-- Error message for required validation -->
                        <div
                          *ngIf="isSubmitted && f.Email1.errors"
                          class="invalid-feedback"
                        >
                          <div *ngIf="f.Email1.errors.required">
                            Please enter Email
                          </div>
                          <div *ngIf="f.Email1.errors.pattern">
                            Invalid Email!
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-12">
                      <div class="mb-3">
                        <label class="form-label"
                          >Username:<span class="errortext ms-1">*</span></label
                        >
                        <input
                          type="text"
                          class="form-control"
                          maxlength="10"
                          (input)="onInputChange()"
                          placeholder="Enter Username"
                          formControlName="UserName"
                          [ngClass]="{
                            'is-invalid': isSubmitted && f.UserName.errors
                          }"
                          TrimWhitespace
                          minlength="3"
                        />
                        <!-- Error message for required validation -->
                        <div
                          *ngIf="isSubmitted && f.UserName.errors"
                          class="invalid-feedback"
                        >
                          <div *ngIf="f.UserName.errors.required">
                            Please enter Username
                          </div>
                          <div *ngIf="f.UserName.errors.minlength">
                            Please enter Username should be at least 3
                            characters long
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-12">
                      <div class="mb-3">
                        <label class="form-label"
                          >Password:<span class="errortext ms-1">*</span></label
                        >
                        <input
                          [type]="visible == 'fa fa-eye' ? 'password' : 'text'"
                          class="form-control"
                          placeholder="Enter Password"
                          formControlName="Password"
                          [ngClass]="{
                            'is-invalid': isSubmitted && f.Password.errors
                          }"
                          TrimWhitespace
                          [(ngModel)]="generatedPassword"
                        />
                        <span class="field-icon" (click)="changeicon()">
                          <i [class]="visible"></i>
                        </span>
                        <!-- Error message for required validation -->
                        <div
                          *ngIf="isSubmitted && f.Password.errors"
                          class="invalid-feedback"
                        >
                          <div *ngIf="f.Password.errors.required">
                            Please enter Password
                          </div>
                          <div
                            *ngIf="
                              f.Password.errors.pattern && EditUserId == ''
                            "
                          >
                            Password should be between 8 to 10 characters with a
                            combination of Numeric, Upper case, Lower case, and
                            Special characters.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mt-4">
                <div class="col-lg-12 col-md-12">
                  <div class="mb-4">
                    <div>
                      <label class="form-label mb-3">User's Feature:</label>
                    </div>

                    <div class="row">
                      <ng-container *ngFor="let permission of MenuPermission">
                        <div class="col-lg-4 col-md-12">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              [(ngModel)]="permission.selected"
                              value=""
                              [id]="permission.Id"
                              [ngModelOptions]="{ standalone: true }"
                            />
                            <label
                              class="form-check-label"
                              [for]="permission.Name"
                              style="word-break: break-word; display: block"
                            >
                              <span
                                [innerHTML]="getSanitizedHtml(permission.Name)"
                              ></span>
                              <!-- {{permission.Name}} -->
                            </label>
                          </div>
                        </div>
                      </ng-container>
                      <ng-container *ngFor="let permission of covidPermission">
                        <div class="col-lg-4 col-md-12">
                          <div class="form-check">
                            <input
                              class="form-check-input"
                              type="checkbox"
                              [(ngModel)]="permission.selected"
                              value=""
                              [id]="permission.ProductId"
                              [ngModelOptions]="{ standalone: true }"
                            />
                            <label
                              class="form-check-label"
                              [for]="permission.Name"
                              style="word-break: break-word; display: block"
                            >
                              <span
                                [innerHTML]="getSanitizedHtml(permission.Name)"
                              ></span>
                              <!-- {{permission.Name}} -->
                            </label>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-12">
                  <div class="text-center mt-3">
                    <button
                      type="submit"
                      class="btn btn-blue m-1"
                      (click)="onSubmit()"
                      *ngIf="EditUserId === ''"
                    >
                      Submit
                    </button>
                    <button
                      type="submit"
                      class="btn btn-blue m-1"
                      (click)="onUpdate()"
                      *ngIf="EditUserId !== ''"
                    >
                      Update
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
