<div class="mt-2 formdiv">
    <div class="row">
    <form [formGroup]="addonForm" appFocus appFocusFirstInput>
        <div class="row gx-2">
            <div class="col-lg-3 col-md-6">
                <div class="mb-2">
                    <label class="form-label">Accession Number:</label><span class="errortext ms-1">*</span>
                    <input type="text" class="form-control"  formControlName="AccessionNumber" [ngClass]="{'is-invalid': isSubmitted && f.AccessionNumber.errors}" maxlength="50">
                    <!-- Error message for required validation -->
                    <div *ngIf="isSubmitted && f.AccessionNumber.errors" class="invalid-feedback">
                        <div *ngIf="f.AccessionNumber.errors.required">Please Enter Accession Number</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-2">
                <label class="form-label">Account Number:</label>
                <kendo-autocomplete
                #autocomplete
                formControlName="ClientId" 
                [data]="accountList"
                textField="Key"
                valueField="Value"
                [filterable]="true"
                (change)="accountchange()"
                >
              </kendo-autocomplete>
            </div>
            <div class="col-lg-3 col-md-6 mb-2">
               
                <label class="form-label">Patient Name:</label><span class="errortext ms-1">*</span>
                <input type="text" class="form-control"  formControlName="PatientName" [ngClass]="{'is-invalid': isSubmitted && f.PatientName.errors}" maxlength="50">
                <!-- Error message for required validation -->
                <div *ngIf="isSubmitted && f.PatientName.errors" class="invalid-feedback">
                    <div *ngIf="f.PatientName.errors.required">Please Enter Patient Name</div>
                </div>
           
            </div>
            <div class="col-lg-3 col-md-6 mb-2">
                <label class="form-label">Patient DOB:</label>
                <kendo-datepicker  style="height: 45px;" calendarType="classic" [animateCalendarNavigation]="true" formControlName="PatientDob" placeholder="mm/dd/yyyy"  format="MM/dd/yyyy" name="PatientDob"></kendo-datepicker>   
            </div>
        </div>
        <div class="row gx-2">
            <div class="col-lg-12 col-md-6 mb-2">
                <label class="form-label">Correction Made:</label>
                <textarea formControlName="CorrectionMade" class="form-control"></textarea>
            </div>
        </div>
      
        <h4 class="mt-3 mb-3" style="font-weight: 800;text-decoration: underline;">ADD ON REQUESTED:</h4>

        <div class="row gx-2 mt-3">
            <div class="col-lg-4 col-md-6 mb-2 ">
                    <label class="form-label">Test Required:</label>
                    <input type="text" class="form-control"  formControlName="TestRequested"  maxlength="50">
            </div>
            <div class="col-lg-4 col-md-6 mb-2 ">
                <label class="form-label">Date Requested:</label>
                <input type="text" class="form-control" formControlName="DateRequested" maxlength="50" readonly> 
        </div>
        <div class="col-lg-4 col-md-6 mb-2 ">
            <label class="form-label">Requested By:</label>
            <input type="text" class="form-control" formControlName="RequestedBy" maxlength="50" readonly>   
    </div>
            
        </div>
        <div class="row gx-2">
            <div class="col-lg-4 col-md-6 mb-2">
                <label class="form-label me-2">Assign to:</label>
                <div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="Isdepartment" id="inlineRadio1" formControlName="Isdepartment" [value]=true (change)="checkvalue()">
                        <label class="form-check-label" for="inlineRadio1">Department</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="Isdepartment" id="inlineRadio2" [value]=false formControlName="Isdepartment" value="false" (change)="checkvalue()">
                        <label class="form-check-label" for="inlineRadio2">User</label>
                     </div>   
                </div>
            </div>
        
                                            
         
            
            </div>
            <div    *ngIf="addonForm.get('Isdepartment').value == true">           
            <div class="col-lg-4 col-md-6 mb-2"> 
                <label class="form-label me-2">Select Department:</label>                    
            </div>   
                 <div class="col-lg-4 col-md-6 mb-2">   
                       <kendo-multiselect
                         #department
                         name="department"
                         [data]="departmentList"
                         textField="Value"
                         valueField="Key"
                         [valuePrimitive]="true"
                         [filterable]="true"
                         [(ngModel)]="selectedDepartment"
                         [ngModelOptions]="{standalone: true}"
                         (valueChange)="checkvalue()"
                       
                       >
                     </kendo-multiselect>
                </div> 
                   
                                           
           </div>
           <div class="row gx-2" [ngStyle]="{'display':userdropdownflag}"> 
                                    
             <div class="col-lg-4 col-md-6">
               
                   <label class="form-label me-2 mb-2">Select User:</label>
            </div> 
                   <div class="col-lg-4 col-md-6 mb-2">
                        <kendo-multiselect
                           #userdropdown
                          name="user"
                          [data]="userList"
                          textField="Value"
                          valueField="Key"
                          [filterable]="true"
                          [valuePrimitive]="true"
                          [(ngModel)]="selectedUser"
                          [ngModelOptions]="{standalone: true}"
                          (valueChange)="checkvalue()"
                         
                        >
                        </kendo-multiselect>
                    </div>    
            </div>
            
           
            <div class="row">
                <div class="col-sm-12">
                  <div class="text-center">
                    <button type="submit" class="btn btn-blue m-1"
                    (click)="onSubmit()">Submit</button>
                  </div>
                </div>
              </div>
            </form>
        </div>
        </div>



        <div class="modal fade "  id="firstLoad" tabindex="-1" aria-hidden="true">
            <div class="table-responsive modal-lg" >
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header justify-content-end">
                    <!-- <h5 class="modal-title">Order Comments</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="modelCommentClose()"></button> -->
                  </div>
                  <div class="modal-body only-title">    
                    <form [formGroup]="addOn" appFocus appFocusFirstInput>
                        <div class="row gx-2 mt-3">
                        <div class="col-lg-4 col-md-6">
                            <div class="mb-2">
                                <label class="form-label me-2">Received Signed Add-on?:</label>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="mb-2">
                                <div class="form-check form-check-inline">
                                  <input
                                    class="form-check-input"
                                    type="radio"
                                    name="Issigned"
                                    id="Issigned"
                                    [value]="true"
                                    formControlName="Issigned"
                                    (change)="toggleInitialsValidation(true)"
                                  />
                                  <label class="form-check-label" for="Issigned">Yes</label>
                                </div>
                                <div class="form-check form-check-inline">
                                  <input
                                    class="form-check-input"
                                    type="radio"
                                    name="Issigned"
                                    id="Issigned1"
                                    [value]="false"
                                    formControlName="Issigned"
                                    (change)="toggleInitialsValidation(false)"
                                  />
                                  <label class="form-check-label" for="Issigned1">No</label>
                                </div>
                              </div>
                        </div>
                            </div>
                        <div class="row gx-2 mt-3">
                            <div class="col-lg-4 col-md-6">
                                <div class="mb-2 d-flex align-items-center">
                                    <label class="form-label">Initials: </label>
                                    <span class="errortext ms-1" *ngIf="extraValidation">*</span>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6">
                                <div class="mb-2">
                                    <input type="text" class="form-control" formControlName="Initialsvalue"  maxlength="50"   [ngClass]="{'is-invalid': addOnSubmitted && extraValidation && m.Initialsvalue.errors}"> 
                                    <div *ngIf="addOnSubmitted && m.Initialsvalue.errors && extraValidation" class="invalid-feedback">
                                        <div *ngIf="m.Initialsvalue.errors.required">Please Enter Initials</div>
                                    </div>  
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                              <div class="text-center">
                                <button type="submit" class="btn btn-blue m-1"
                                (click)="Submit()">Submit</button>
                              </div>
                            </div>
                        </div>
                    </form>       
                   
                  </div>
                 
                </div>
               
              </div>
            </div>
          </div>


  