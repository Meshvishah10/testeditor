<div class="row">
  <div class="col-md-12">
    <div class="mt-2 mb-2">
      <div class="row align-items-center">
        <div class="col-lg-6 col-md-6 mb-2 d-flex">
          <div class="input-with-icon">
            <input type="text" class="form-control" placeholder="Search here...."
              [(ngModel)]="requestPayload.CustomSearch" (change)="getBillingCycleList()" />
            <div class="btn btn-default icon" (click)="getBillingCycleList()">
              <i class="fa fa-search"></i>
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-md-6 order-md-last" *ngIf="permission.MenuPermission.Add == true">
          <div class="text-end font15 font-w600 text-blue addedproicon my-2"><a (click)="addBillingCycle()"
              style="cursor: pointer;" class="link-blue"><img src="../../../../assets/images/icons/add-icon-white.svg"
                class="me-2" />New Billing Cycle</a></div>
        </div>
        <!-- <div class="col-lg-6 col-md-6">
          <div class="font17 open-sans text-blue font-w700 my-2">Billing Cycle</div>
        </div> -->
      </div>
    </div>

    <div class="tablediv mt-2" *ngIf="permission.MenuPermission.View == true">
      <div class="table-responsive">
        <kendo-grid [data]="billingCycleList" [pageSize]="state.take" [skip]="state.skip" [sortable]="true"
          [sort]="state.sort" filterable="menu" [filter]="state.filter"
          [pageable]="{buttonCount:5,pageSizes:[10,20,50,100,500]}" (dataStateChange)="dataStateChange($event)">
          <kendo-grid-column [sortable]="true" field="Number" title="#" filter="numeric"
            [headerStyle]="{'text-align': 'left', 'width' : '6%'}" [style]="{'text-align':'left', 'width' : '6%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div class="d-flex align-items-center">
                <a class="link-blue" style="cursor: pointer;"  title="View billing cycle"
                  (click)="onViewBillingCycle(dataItem.Id)"><u>{{dataItem.Number}}</u></a>
              </div>
            </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-numeric-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="eq">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-gt-operator></kendo-filter-gt-operator>
                <kendo-filter-gte-operator></kendo-filter-gte-operator>
                <kendo-filter-lt-operator></kendo-filter-lt-operator>
                <kendo-filter-lte-operator></kendo-filter-lte-operator>
              </kendo-grid-numeric-filter-menu>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-column field="CreatedDate" filter="date" title="Upload Date"
            [headerStyle]="{'text-align': 'left' , 'width' : '12%' }"
            [style]="{'text-align': 'center' , 'width' : '12%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div>{{ dataItem.CreatedDate | date :'MM/dd/yyyy' }}</div>
              <!-- <div>{{ dataItem.CreatedDate | date :'hh:mm aa' }}</div> -->
              <!-- {{ dataItem.CreatedDate |  date: 'MM/dd/yy hh:mm:ss a' }} -->
            </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-date-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="eq">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-gt-operator></kendo-filter-gt-operator>
                <kendo-filter-gte-operator></kendo-filter-gte-operator>
                <kendo-filter-lt-operator></kendo-filter-lt-operator>
                <kendo-filter-lte-operator></kendo-filter-lte-operator>
              </kendo-grid-date-filter-menu>
            </ng-template>
            <ng-template kendoFilterDateInputTemplate let-filter>
              <kendo-datepicker [format]="'MM/dd/yyyy'" [value]="filter?.value"></kendo-datepicker>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-column field="InvoiceDate" filter="date" title="Invoice Date"
            [headerStyle]="{'text-align': 'left' , 'width' : '12%' }"
            [style]="{'text-align': 'center' , 'width' : '12%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div>{{ dataItem.InvoiceDate | date :'MM/dd/yyyy' }}</div>
              <!-- <div>{{ dataItem.InvoiceDate | date :'hh:mm aa' }}</div> -->
              <!-- {{ dataItem.InvoiceDate |  date: 'MM/dd/yy hh:mm:ss a' }} -->
            </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-date-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="eq">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-gt-operator></kendo-filter-gt-operator>
                <kendo-filter-gte-operator></kendo-filter-gte-operator>
                <kendo-filter-lt-operator></kendo-filter-lt-operator>
                <kendo-filter-lte-operator></kendo-filter-lte-operator>
              </kendo-grid-date-filter-menu>
            </ng-template>
            <ng-template kendoFilterDateInputTemplate let-filter>
              <kendo-datepicker [format]="'MM/dd/yyyy'" [value]="filter?.value"></kendo-datepicker>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-column field="BillingPeriod" filter="date" title="Billing Period"
            [headerStyle]="{'text-align': 'left' , 'width' : '16%' }"
            [style]="{'text-align': 'center' , 'width' : '16%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <!-- <div>{{ dataItem.BillingPeriod | date :'MM/dd/yyyy' }}</div> -->
              <!-- <div>{{ dataItem.BillingPeriod | date :'hh:mm aa' }}</div> -->
              <!-- {{ dataItem.BillingPeriod |  date: 'MM/dd/yy hh:mm:ss a' }} -->
              {{dataItem.BillingPeriod}}
            </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-date-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="eq">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-gt-operator></kendo-filter-gt-operator>
                <kendo-filter-gte-operator></kendo-filter-gte-operator>
                <kendo-filter-lt-operator></kendo-filter-lt-operator>
                <kendo-filter-lte-operator></kendo-filter-lte-operator>
              </kendo-grid-date-filter-menu>
            </ng-template>
            <ng-template kendoFilterDateInputTemplate let-filter>
              <kendo-datepicker [format]="'MM/dd/yyyy'" [value]="filter?.value"></kendo-datepicker>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-column [sortable]="true" field="GrandTotal" title="Grand Total"
            [headerStyle]="{'text-align': 'left' , 'width' : '10%'}"
            [style]="{'text-align': 'center', 'width' : '10%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div *ngIf="dataItem.GrandTotal">
                $ {{ dataItem.GrandTotal | number: '1.2-2'}}
              </div>
            </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-numeric-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="eq">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-gt-operator></kendo-filter-gt-operator>
                <kendo-filter-gte-operator></kendo-filter-gte-operator>
                <kendo-filter-lt-operator></kendo-filter-lt-operator>
                <kendo-filter-lte-operator></kendo-filter-lte-operator>
              </kendo-grid-numeric-filter-menu>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-column field="FileName" title="File Name" [headerStyle]="{'text-align': 'left' , 'width' : '28%'}"
            [style]="{'text-align': 'left' , 'width' : '28%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              {{dataItem.FileName}}
            </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-string-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="contains">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-contains-operator></kendo-filter-contains-operator>
                <kendo-filter-startswith-operator></kendo-filter-startswith-operator>
                <kendo-filter-endswith-operator></kendo-filter-endswith-operator>
              </kendo-grid-string-filter-menu>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-column [sortable]="true" field="StatusText" title="Status"
            [headerStyle]="{'text-align': 'left', 'width' : '8%'}" [style]="{'text-align':'center', 'width' : '8%'}">
            <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
              let-filterService="filterService">
              <dropdownlist-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                [filterService]="filterService" textField="Value" valueField="Key"
                [data]="statusList"></dropdownlist-filter>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-column [sortable]="true" field="SuccessRecords" title="Record Status"
          [filterable]="false" [sortable]="false"
            [headerStyle]="{'text-align': 'left', 'width' : '8%'}" [style]="{'text-align':'center', 'width' : '8%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <span *ngIf="dataItem.Status === 3">
              <div *ngIf="dataItem.SuccessRecords">
                 Success: {{dataItem.SuccessRecords}}
              </div>
              <div *ngIf="dataItem.FailedRecords">
                 Fail: {{dataItem.FailedRecords}}
              </div>
              </span>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-column title="Action" [headerStyle]="{'text-align': 'left', 'width' : '8%'}"
            [style]="{'text-align': 'center', 'width' : '8%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div class="link-gray font16 d-inline-block" title="Delete" (click)="deleteModel(dataItem.Id)" style="cursor: pointer"
                data-bs-toggle="modal" data-bs-target="#deleteProduct" *ngIf="permission.MenuPermission.Delete == true && dataItem.Status === 1">
                <i class="fa fa-trash-alt"></i>
              </div>&nbsp;
              <div class="link-gray font16 d-inline-block" title="Export" (click)="exportBillingCycle(dataItem.Id)" style="cursor: pointer"
                *ngIf="permission.MenuPermission.Export == true">
                <i class="fa fa-file-export"></i>
              </div>
              <!-- <a class="link-gray font16 d-inline-block" title="Edit" style="cursor: pointer;"
                *ngIf="permission.MenuPermission.Edit && !['Archives', 'Deny', 'Shipped'].includes(dataItem.StageName)"
                (click)="editOrder(dataItem)"><i class="fa fa-edit"></i></a>&nbsp;
              <div data-bs-target="#deleteOrder"
                *ngIf="permission.MenuPermission.Edit && !['Archives', 'Deny', 'Shipped'].includes(dataItem.StageName)"
                (click)="deleteModel(dataItem.Id)" data-bs-toggle="modal" class="link-gray font16 d-inline-block"
                title="Delete" style="cursor: pointer;"><i class="fa fa-trash-alt"></i></div>

              <div data-bs-target="#trackingOrder"
                *ngIf="permission.MenuPermission.Edit == true && dataItem.StageName === 'Shipped'"
                (click)="trackingModel(dataItem.Id)" data-bs-toggle="modal"
                class="link-blue font14 d-inline-block status-link" title="Edit Tracking" style="cursor: pointer;">Edit
                Tracking</div>

              <a data-bs-target="#archiveOrder" data-bs-toggle="modal" (click)="archiveModel(dataItem.Id)"
                *ngIf="!['Archives', 'Deny', 'Shipped'].includes(dataItem.StageName)"
                class="link-blue font14 d-inline-block status-link" title="Archive it" style="cursor: pointer;">Archive
                it</a>
              <div data-bs-target="#history" data-bs-toggle="modal" title="History" (click)="historyModel(dataItem.Id)">
                <a *ngIf="dataItem.StageName !== 'Awaiting Approval'" class="link-gray font14 d-inline-block"
                  title="History" style="cursor: pointer;">History</a>
              </div> -->
            </ng-template>
          </kendo-grid-column>
        </kendo-grid>
      </div>
    </div>
  </div>
</div>

<!-- Delete Product Modal -->
<div class="modal deletepopup fade" id="deleteProduct" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header justify-content-end">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
          (click)="modelDeleteClose()"></button>
      </div>
      <div class="modal-body only-title text-center">
        <h5>Are you sure want to delete?</h5>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-primary m-1" (click)="deleteProduct()">Yes</button>
        <button type="button" class="btn btn-secondary m-1" (click)="modelDeleteClose()">No</button>
      </div>
    </div>
  </div>
</div>