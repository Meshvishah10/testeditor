<div class="row">
  <div class="col-md-12">
    <div class="mt-2 mb-2">
      <div class="row align-items-center">
        <div class="col-lg-6 col-md-6 mb-2 d-flex">
          <div class="input-with-icon">
            <input type="text" class="form-control" placeholder="Search here...."
              [(ngModel)]="requestPayload.CustomSearch" (change)="getChargeInvoice()" />
            <div class="btn btn-default icon" (click)="getChargeInvoice()">
              <i class="fa fa-search"></i>
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-md-6 order-md-last" *ngIf="permission.MenuPermission.Add == true">
          <div class="text-end font15 font-w600 text-blue addedproicon my-2"><a (click)="addBillingCycle()"
              style="cursor: pointer;" class="link-blue"><img src="../../../../assets/images/icons/add-icon-white.svg"
                class="me-2" />New Charge Invoice</a></div>
        </div>
        <!-- <div class="col-lg-6 col-md-6">
            <div class="font17 open-sans text-blue font-w700 my-2">Billing Cycle</div>
          </div> -->
      </div>
    </div>

    <div class="tablediv mt-2" *ngIf="permission.MenuPermission.View == true">
      <div class="table-responsive">
        <kendo-grid [data]="chargeInvoiceList" [pageSize]="state.take" [skip]="state.skip" [sortable]="true"
          [sort]="state.sort" filterable="menu" [filter]="state.filter"
          [pageable]="{buttonCount:5,pageSizes:[10,20,50,100,500]}" (dataStateChange)="dataStateChange($event)">
          <kendo-grid-column title="View" [headerStyle]="{'text-align': 'left', 'width' : '7%'}"
            [style]="{'text-align': 'center', 'width' : '7%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div class="text-end font15 font-w600 text-blue my-2 d-inline-block">
                <a (click)="listDataStageOpen(dataItem.Id)" style="cursor: pointer;" class="link-blue">
                  <i class="fa fa-info-circle" aria-hidden="true" style="font-size: 20px;" title="View Invoice"></i>
                  <!-- <img src="../../../../assets/images/icons/eye-view.svg" class="me-2" /> -->
                </a>
              </div>
            </ng-template>
          </kendo-grid-column>
          <kendo-grid-column [sortable]="true" field="ClientNumber" title="Client Number" filter="numeric"
            [headerStyle]="{'text-align': 'left', 'width' : '10%'}" [style]="{'text-align':'left', 'width' : '10%'}">
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-string-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="contains">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-contains-operator></kendo-filter-contains-operator>
                <kendo-filter-startswith-operator></kendo-filter-startswith-operator>
                <kendo-filter-endswith-operator></kendo-filter-endswith-operator>
              </kendo-grid-string-filter-menu>
            </ng-template>
          </kendo-grid-column>

          <kendo-grid-column field="CustomerName" title="Customer Name"
            [headerStyle]="{'text-align': 'left' , 'width' : '15%'}" [style]="{'text-align': 'left' , 'width' : '15%'}">
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-string-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="contains">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-contains-operator></kendo-filter-contains-operator>
                <kendo-filter-startswith-operator></kendo-filter-startswith-operator>
                <kendo-filter-endswith-operator></kendo-filter-endswith-operator>
              </kendo-grid-string-filter-menu>
            </ng-template>
          </kendo-grid-column>

          <kendo-grid-column [sortable]="true" field="TransactionId" title="Transaction Id" filter="numeric"
            [headerStyle]="{'text-align': 'left', 'width' : '15%'}" [style]="{'text-align':'left', 'width' : '15%'}">
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-numeric-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="eq">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-gt-operator></kendo-filter-gt-operator>
                <kendo-filter-gte-operator></kendo-filter-gte-operator>
                <kendo-filter-lt-operator></kendo-filter-lt-operator>
                <kendo-filter-lte-operator></kendo-filter-lte-operator>
              </kendo-grid-numeric-filter-menu>
            </ng-template>
          </kendo-grid-column>

          <kendo-grid-column [sortable]="true" field="Amount" title="Amount"
            [headerStyle]="{'text-align': 'left' , 'width' : '10%'}"
            [style]="{'text-align': 'center', 'width' : '10%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div *ngIf="dataItem.Amount">
                $ {{ dataItem.Amount | number: '1.2-2'}}
              </div>
            </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-numeric-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="eq">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-gt-operator></kendo-filter-gt-operator>
                <kendo-filter-gte-operator></kendo-filter-gte-operator>
                <kendo-filter-lt-operator></kendo-filter-lt-operator>
                <kendo-filter-lte-operator></kendo-filter-lte-operator>
              </kendo-grid-numeric-filter-menu>
            </ng-template>
          </kendo-grid-column>

          <kendo-grid-column field="Description" title="Description"
            [headerStyle]="{'text-align': 'left' , 'width' : '20%' }"
            [style]="{'text-align': 'left' , 'width' : '20%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div kendoTooltip [title]="dataItem?.Description">
                {{ dataItem?.Description?.length > 100 ? (dataItem?.Description | slice:0:100) + '...' :
                dataItem?.Description }}
              </div>
            </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-string-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="contains">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-contains-operator></kendo-filter-contains-operator>
                <kendo-filter-startswith-operator></kendo-filter-startswith-operator>
                <kendo-filter-endswith-operator></kendo-filter-endswith-operator>
              </kendo-grid-string-filter-menu>
            </ng-template>
          </kendo-grid-column>


          <kendo-grid-column [sortable]="true" field="TotalAmount" title="Total Amount"
            [headerStyle]="{'text-align': 'left' , 'width' : '10%'}"
            [style]="{'text-align': 'center', 'width' : '10%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div *ngIf="dataItem.TotalAmount">
                $ {{ dataItem.TotalAmount | number: '1.2-2'}}
              </div>
            </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
              <kendo-grid-numeric-filter-menu [column]="column" [filter]="filter" [filterService]="filterService"
                operator="eq">
                <kendo-filter-eq-operator></kendo-filter-eq-operator>
                <kendo-filter-neq-operator></kendo-filter-neq-operator>
                <kendo-filter-gt-operator></kendo-filter-gt-operator>
                <kendo-filter-gte-operator></kendo-filter-gte-operator>
                <kendo-filter-lt-operator></kendo-filter-lt-operator>
                <kendo-filter-lte-operator></kendo-filter-lte-operator>
              </kendo-grid-numeric-filter-menu>
            </ng-template>
          </kendo-grid-column>


          <kendo-grid-column [sortable]="true" field="Status" title="Status"
            [headerStyle]="{'text-align': 'left', 'width' : '10%'}" [style]="{'text-align':'center', 'width' : '10%'}">
            <ng-template kendoGridCellTemplate let-dataItem>
              <div *ngIf="dataItem.StatusText =='Success'" style="color: green;">{{ dataItem.StatusText}}</div>
              <div *ngIf="dataItem.StatusText =='Failed'" style="color: red;">{{ dataItem.StatusText}}</div>
              <span kendoTooltip [title]="dataItem.Response" style='text-wrap: nowrap;'>
                {{ dataItem?.Response }}
              </span>
            </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
              let-filterService="filterService">
              <dropdownlist-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                [filterService]="filterService" textField="Value" valueField="Key"
                [data]="statusList"></dropdownlist-filter>
            </ng-template>
          </kendo-grid-column>

        </kendo-grid>
      </div>
    </div>
  </div>
</div>


<div class="modal fade " id="InfoModel" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-md">
    <div class="modal-content">
      <div class="modal-header justify-content-end">
        <h5 class="modal-title">View Charge Invoice</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
          (click)="closeModel()"></button>
      </div>
      <div class="modal-body only-title" *ngIf="response !== '' ">
        <div class="row gx-2">
          <div class="col-lg-6 col-md-6 mb-2">
            <label class="form-label">Client Number<span class="errortext ms-1">*</span></label>
            <input type="text" class="form-control" [ngModel]="response.ClientNumber" disabled>
          </div>
          <div class="col-lg-6 col-md-6 mb-2">
            <label class="form-label">Card Number<span class="errortext ms-1">*</span></label>
            <input type="text" class="form-control" [ngModel]="response.CardNumber" disabled>
          </div>
        </div>
        <div class="row gx-2">
          <div class="col-lg-6 col-md-6 mb-2">
            <label class="form-label">First Name<span class="errortext ms-1">*</span></label>
            <input type="text" class="form-control" [ngModel]="response.FirstName" disabled>
          </div>
          <div class="col-lg-6 col-md-6 mb-2">
            <label class="form-label">Last Name<span class="errortext ms-1">*</span></label>
            <input type="text" class="form-control" [ngModel]="response.LastName" disabled>
          </div>

        </div>
        <div class="row gx-2">
          <div class="col-lg-4 col-md-6 mb-2">
            <label class="form-label">CVV<span class="errortext ms-1">*</span></label>
            <input type="text" class="form-control" [ngModel]="response.CardCVV" disabled>
          </div>
          <div class="col-lg-8 col-md-6 mb-3">
            <label class="form-label">Expiration<span class="errortext ms-1">*</span></label>
            <div class="d-flex">
              <input type="text" class="form-control me-1" [ngModel]="response.CardExpirationMonth" disabled>
              <span>/</span>
              <input type="text" class="form-control ms-1" [ngModel]="response.CardExpirationYear" disabled>
            </div>
          </div>
        </div>
        <div class="row gx-2">
          <div class="col-lg-4 col-md-6 mb-2 form-group-dollar">
            <label class="form-label">Amount<span class="errortext ms-1">*</span></label>
            <input type="text" class="form-control dollar-input customheight" [ngModel]="response.Amount.toFixed(2)" disabled>
          </div>
          <div class="col-lg-4 col-md-6 mb-2 form-group-dollar">
            <label class="form-label">Total Amount<span class="errortext ms-1">*</span></label>
            <input type="text" class="form-control dollar-input customheight" [ngModel]="response.TotalAmount.toFixed(2)" disabled>
          </div>
          <div class="col-lg-4 col-md-6 mb-2">
            <label class="form-label">Zip Code</label>
            <input type="text" class="form-control" [ngModel]="response.ZipCode" disabled>
          </div>
        </div>
        <div class="row gx-2">
          <div class="col-lg-12 col-md-6 mb-2">
            <label class="form-label">Email</label>
            <input type="text" class="form-control" [ngModel]="response.Email" disabled>
          </div>
        </div>
        <div class="row gx-2">
          <div class="col-lg-12 col-md-6 mb-2">
            <label class="form-label">Description</label>
            <textarea class="form-control" [ngModel]="response.Description" disabled></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>